<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="icon" href="../images/static/logo.png" />
    <link rel="stylesheet" href="../css/allcommon.css" />
    <link rel="stylesheet" href="../css/myBootstrap.css" />
    <link rel="stylesheet" href="../css/productdetails.css" />
    <title>Vastu, Introduction Ayurveda, Elatefit</title>
    <style>
        #audioContainer{
            display: flex;
            flex-wrap: wrap;
            width: 100vw;
        }
        .audioDiv{
            display:flex; 
            flex-direction:column;
            width:150px;
            height: 200px;
            border:2px solid rgb(188, 188, 188);
            margin:10px;
            border-radius: 7px;
        }
        .audImg{
            width: 150px;
            height: 180px;
            border-radius: 7px 7px 0 0;
        }
        .audBtnContainer{
            width: 150px;
            height: 180px;
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .pauseBtn{
            display:none;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            font-size: 20px;
        }
        .playBtn{
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: none;
            font-size: 20px;
        }
        #favToggleBtn{
            margin-left: 5px;
        }
        #audFavBtnContainer{
            display: flex;
            flex-direction: column;
            width: 150px;
            margin-left: 10px;
        }
        .eachFavBtn{
            display: flex;
            margin: 3px;
            justify-content: space-around;
        }
        .favInCard{
            position: absolute;
            font-size: 20px;
            display: flex;
            margin: 3px;
            cursor: pointer;
        }
        #favDropinEachAudio{
            position: absolute;
            left: 40%;
            bottom: 50%;
            transition: 0.5s;
            font-size: 35px;
            border: 2px solid grey;
            padding: 10px;
            box-shadow: rgba(0, 0, 0, 0.56) 0px 22px 70px 4px;
            display: none;
            background: rgb(255, 255, 255);
            cursor: pointer;
        }
        .removeFromPlaylist{
            position: absolute;
            font-size: 20px;
            display: none;
            margin: 3px;
            font-weight: bolder;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div id="navBarContainer">
        <button type="button" class="btn-warning" id="toggleBtn">
        <i class="fa-sharp fa-solid fa-bars"></i>
      </button>
        <iframe id="searchbar" src="../fragsearchbar.html" loading="lazy"></iframe>
    </div>
    <iframe id="navframe" src="../fragnav.html" loading="lazy"></iframe> 

    
    <h1 style="margin-top:100px;"> &nbsp; SLEEP BETTER</h1>

    <button class="btn-danger" id="favToggleBtn" onclick="toggle('audFavBtnContainer')"><i class="fa-sharp fa-solid fa-heart"></i> Favourite <i class="fa-solid fa-circle-chevron-down"></i></button>
    <div id="audFavBtnContainer">
        <div class="eachFavBtn">
            <a class="btn-warning" href="sleepMusicTest5.html"><i class="fa-sharp fa-solid fa-heart"></i> All </a>
        </div>
        <div class="eachFavBtn">
            <button class="btn-danger" id="firstFavPlay"><i class="fa-sharp fa-solid fa-heart"></i> 1st Favorite Play</button>
        </div>
        <div class="eachFavBtn">
            <button class="btn-danger" id="secondFavPlay"><i class="fa-sharp fa-solid fa-heart"></i> 2nd Favorite Play</button>
        </div>
        <div class="eachFavBtn">
            <button class="btn-danger" id="thirdFavPlay"><i class="fa-sharp fa-solid fa-heart"></i> 3rd Favorite Play</button>
        </div>
    </div>
    


    <div id="audioContainer">
    <!-- Audio 1-->
    <div class="audioDiv" id="audioDiv1" value="false">
        <img class="audImg" id="audImg1" divID="audioDiv1" audioID="myAudio1" src="images/hero.jfif" alt="hero image" loading="lazy">
        <audio class="myAudio" id="myAudio1" preload loop>
            <source src="music/hero.mp3" type="audio/ogg">
            Your browser does not support the audio tag.
        </audio>
        <input class="audRange" id="audRange1" audioID="myAudio1" idVal="0" type="range" min="0.0" max="1.0" step="0.01" value="0.1">
        <i class="fa-solid fa-heart favInCard" id="favInCard1" divID="audioDiv1" rangeID="audRange1" audioID="myAudio1" value="0"></i>
        <i class="removeFromPlaylist" value="0">X</i>
    </div>

    <!-- Audio 2-->
    <div class="audioDiv" id="audioDiv2" value="false">
        <img class="audImg" id="audImg2" divID="audioDiv2" audioID="myAudio2" src="images/hitman.jfif" alt="hero image" loading="lazy">
        <audio class="myAudio" id="myAudio2" preload loop>
            <source src="music/hit.mp3" type="audio/ogg">
            Your browser does not support the audio tag.
        </audio>
        <input class="audRange" id="audRange2" audioID="myAudio2" idVal="1" type="range" min="0.0" max="1.0" step="0.01" value="0.1">
        <i class="fa-solid fa-heart favInCard" id="favInCard2" divID="audioDiv2" rangeID="audRange2" audioID="myAudio2" value="1"></i>
        <i class="removeFromPlaylist" value="1">X</i>
    </div>

    <!-- Audio 3-->
    <div class="audioDiv" id="audioDiv3" value="false">
        <img class="audImg" id="audImg3" divID="audioDiv3" audioID="myAudio3" src="images/thunder2.jfif" alt="hero image" loading="lazy">
        <audio class="myAudio" id="myAudio3" preload loop>
            <source src="music/LowThunderRolls.mp3" type="audio/ogg">
            Your browser does not support the audio tag.
        </audio>
        <input class="audRange" id="audRange3" audioID="myAudio3" idVal="2" type="range" min="0.0" max="1.0" step="0.01" value="0.1">
        <i class="fa-solid fa-heart favInCard" id="favInCard3" divID="audioDiv3" rangeID="audRange3" audioID="myAudio3" value="2"></i>
        <i class="removeFromPlaylist" value="2">X</i>
    </div>

    <!-- Audio 4-->
    <div class="audioDiv" id="audioDiv4" value="false">
        <img class="audImg" id="audImg4" divID="audioDiv4" audioID="myAudio4" src="images/rain1.jpg" alt="hero image" loading="lazy">
        <audio class="myAudio" id="myAudio4" preload loop>
            <source src="music/rainOnRoof.mp3" type="audio/ogg">
            Your browser does not support the audio tag.
        </audio>
        <input class="audRange" id="audRange4" audioID="myAudio4" idVal="3" type="range" min="0.0" max="1.0" step="0.01" value="0.1">
        <i class="fa-solid fa-heart favInCard" id="favInCard4" divID="audioDiv4" rangeID="audRange4" audioID="myAudio4" value="3"></i>
        <i class="removeFromPlaylist" value="3">X</i>
    </div>

    <!-- Audio 5-->
    <div class="audioDiv" id="audioDiv5" value="false">
        <img class="audImg" id="audImg5" divID="audioDiv5" audioID="myAudio5" src="images/rain2.jpg" alt="hero image" loading="lazy">
        <audio class="myAudio" id="myAudio5" preload loop>
            <source src="music/rainOnCarHeavy.mp3" type="audio/ogg">
            Your browser does not support the audio tag.
        </audio>
        <input class="audRange" id="audRange5" audioID="myAudio5" idVal="4" type="range" min="0.0" max="1.0" step="0.01" value="0.1">
        <i class="fa-solid fa-heart favInCard" id="favInCard5" divID="audioDiv5" rangeID="audRange5" audioID="myAudio5" value="4"></i>
        <i class="removeFromPlaylist" value="4">X</i>
    </div>

    <!-- Audio 6-->
    <div class="audioDiv" id="audioDiv6" value="false">
        <img class="audImg" id="audImg6" divID="audioDiv6" audioID="myAudio6" src="images/iceRain.jfif" alt="hero image" loading="lazy">
        <audio class="myAudio" id="myAudio6" preload loop>
            <source src="music/iceRain.mp3" type="audio/ogg">
            Your browser does not support the audio tag.
        </audio>
        <input class="audRange" id="audRange6" audioID="myAudio6" idVal="5" type="range" min="0.0" max="1.0" step="0.01" value="0.1">
        <i class="fa-solid fa-heart favInCard" id="favInCard6" divID="audioDiv6" rangeID="audRange6" audioID="myAudio6" value="5"></i>
        <i class="removeFromPlaylist" value="5">X</i>
    </div>

    <!-- Audio 7-->
    <div class="audioDiv" id="audioDiv7" value="false">
        <img class="audImg" id="audImg7" divID="audioDiv7" audioID="myAudio7" src="images/rain3.jpg" alt="hero image" loading="lazy">
        <audio class="myAudio" id="myAudio7" preload loop>
            <source src="music/RainOnRooftop.mp3" type="audio/ogg">
            Your browser does not support the audio tag.
        </audio>
        <input class="audRange" id="audRange7" audioID="myAudio7" idVal="6" type="range" min="0.0" max="1.0" step="0.01" value="0.1">
        <i class="fa-solid fa-heart favInCard" id="favInCard7" divID="audioDiv7" rangeID="audRange7" audioID="myAudio7" value="6"></i>
        <i class="removeFromPlaylist" value="6">X</i>
    </div>

    <!-- Audio 8-->
    <div class="audioDiv" id="audioDiv8" value="false">
        <img class="audImg" id="audImg8" divID="audioDiv8" audioID="myAudio8" src="images/thunder1.jfif" alt="hero image" loading="lazy">
        <audio class="myAudio" id="myAudio8" preload loop>
            <source src="music/distantThunder.mp3" type="audio/ogg">
            Your browser does not support the audio tag.
        </audio>
        <input class="audRange" id="audRange8" audioID="myAudio8" idVal="7" type="range" min="0.0" max="1.0" step="0.01" value="0.1">
        <i class="fa-solid fa-heart favInCard" id="favInCard8" divID="audioDiv8" rangeID="audRange8" audioID="myAudio8" value="7"></i>
        <i class="removeFromPlaylist" value="7">X</i>
    </div>

    <div id="favDropinEachAudio">
        <div id="favDropinEachAudioCancel" style="text-align:end;">X</div>
        <div id="firstFavSave"><i class="fa-solid fa-heart"></i> <small>First Fav</small></div> <hr>
        <div id="secondFavSave"><i class="fa-solid fa-heart"></i> <small>Second Fav</small></div> <hr>
        <div id="thirdFavSave"><i class="fa-solid fa-heart"></i> <small>Third Fav</small></div>
    </div>
</div>



    <script>
        //BTN Toggle
        function toggle(audFavBtnContainer){
            var element = document.getElementById(audFavBtnContainer);
            if(element.style.display === "none"){
                element.style.display = "block";
            }else{
                element.style.display = "none";
            };
``      };


        // //Get the total no of audio available
        // var totalAudio =[];
        // for(let i=0; i< favInCardArray.length; i++){ 
        //     totalAudio.push(i);
        // }
        // console.log(totalAudio);

        // //Range Array
        // var audRange = document.getElementsByClassName("audRange");
        // var audRangeArray = Array.prototype.slice.call(audRange);
        // var audRangeArrayAll = [];

        // audRangeArray.forEach(function(elem){
        //     audRangeArrayAll.push(elem.value);
        // });
        // console.log(audRangeArrayAll);

        //PLAY AND PAUSE AUDIO
        var audImg = document.getElementsByClassName("audImg");
        var audImgArray = Array.prototype.slice.call(audImg);
        let audclicks1 = 1;

        audImgArray.forEach(function(e){
            e.addEventListener("click", function(){
                
                let divID = e.getAttribute("divID");
                let audioID = e.getAttribute("audioID");
                let divIDTag = document.getElementById(divID);
                let audioIDTag = document.getElementById(audioID);
                console.log(divIDTag);
            
            if(audclicks1%2==0){

                divIDTag.style.border="2px solid rgb(188, 188, 188)";
                audioIDTag.pause();
                e.style.filter="blur(0px)";
            }else{
                divIDTag.style.border="3px solid orange";
                document.getElementById(audioID).volume=0.1;
                audioIDTag.play();
                e.style.filter="blur(3px)";
            };
            audclicks1=audclicks1+1;
            });
        });
        

        //Toggle favDropinEachAudioCancel btn
        var favDropinEachAudioCancel = document.getElementById("favDropinEachAudioCancel");
        favDropinEachAudioCancel.addEventListener("click", function(){
            favDropinEachAudio.style.display="none";
            
        });

        //Saving each Audio range in Local Storage
        var audRange = document.getElementsByClassName("audRange");
        var audRangeArray = Array.prototype.slice.call(audRange);
        audRangeArray.forEach(function(e) {
            
                let audioID = e.getAttribute("audioID");
                let val = e.getAttribute("idVal");
                localStorage.setItem(val,"0.1"); //used to set volume initially by default
                
                e.addEventListener("input", function() {
                    let audioIDTag = document.getElementById(audioID);
                    audioIDTag.volume = e.value;
                    
                    localStorage.setItem(val,`${e.value}`);
                });
        });

        //Click Each Fav in Card
        var favInCard = document.getElementsByClassName("favInCard");
        var favInCardArray = Array.prototype.slice.call(favInCard);
        var play1Set = new Set(); //set is used because it will not store duplicate values
        var firstFavSave = document.getElementById("firstFavSave");
        var secondFavSave = document.getElementById("secondFavSave");
        var thirdFavSave = document.getElementById("thirdFavSave");

        favInCardArray.forEach(function(elem){
            elem.addEventListener("click", function(){
                this.style.color = "red";
                favDropinEachAudio.style.display="block";
                var thiselem = elem; //it will fetch the current element in the loop and save it in var

                firstFavSave.addEventListener("click", function(){
                    let selectedFavValue = thiselem.getAttribute("value");
                    let audioDivVal = thiselem.getAttribute("divID");
                    let audRangeID = thiselem.getAttribute("rangeID");
                    let audioID = thiselem.getAttribute("audioID");
                    let audRangeVal = localStorage.getItem(selectedFavValue);
                
                    console.log(`Selected Fav btn value: ${selectedFavValue}`);
                    console.log(`Selected Audio Div ID: ${audioDivVal}`);
                    console.log(`Selected Audio Range Value from local Storage: ${audRangeVal}`);
                    localStorage.setItem(`play1${selectedFavValue}`,`${audioDivVal}${audRangeID}${audioID}${audRangeVal}`);
                    play1Set.add(selectedFavValue);
                    console.log(play1Set);
                    location.reload();
                    window.alert(`Song is added to Playlist 1!`);
                });

                secondFavSave.addEventListener("click", function(){
                    let selectedFavValue = thiselem.getAttribute("value");
                    let audioDivVal = thiselem.getAttribute("divID");
                    let audRangeID = thiselem.getAttribute("rangeID");
                    let audioID = thiselem.getAttribute("audioID");
                    let audRangeVal = localStorage.getItem(selectedFavValue);
                
                    console.log(`Selected Fav btn value: ${selectedFavValue}`);
                    console.log(`Selected Audio Div ID: ${audioDivVal}`);
                    console.log(`Selected Audio Range Value from local Storage: ${audRangeVal}`);
                    localStorage.setItem(`play2${selectedFavValue}`,`${audioDivVal}${audRangeID}${audioID}${audRangeVal}`);
                    play1Set.add(selectedFavValue);
                    console.log(play1Set);
                    location.reload();
                    window.alert(`Song is added to Playlist 2!`);
                });

                thirdFavSave.addEventListener("click", function(){
                    let selectedFavValue = thiselem.getAttribute("value");
                    let audioDivVal = thiselem.getAttribute("divID");
                    let audRangeID = thiselem.getAttribute("rangeID");
                    let audioID = thiselem.getAttribute("audioID");
                    let audRangeVal = localStorage.getItem(selectedFavValue);
                
                    console.log(`Selected Fav btn value: ${selectedFavValue}`);
                    console.log(`Selected Audio Div ID: ${audioDivVal}`);
                    console.log(`Selected Audio Range Value from local Storage: ${audRangeVal}`);
                    localStorage.setItem(`play3${selectedFavValue}`,`${audioDivVal}${audRangeID}${audioID}${audRangeVal}`);
                    play1Set.add(selectedFavValue);
                    console.log(play1Set);
                    location.reload();
                    window.alert(`Song is added to Playlist 3!`);
                });

                
            });
        });

        // Click Play for each Fav
        var firstFavPlay = document.getElementById("firstFavPlay");
        var secondFavPlay = document.getElementById("secondFavPlay");
        var thirdFavPlay = document.getElementById("thirdFavPlay");

        var audioDiv = document.getElementsByClassName("audioDiv");
        var audioDivArray = Array.prototype.slice.call(audioDiv);

        var myAudio = document.getElementsByClassName("myAudio");
        var myAudioArray = Array.prototype.slice.call(myAudio);

        var removeFromPlaylist = document.getElementsByClassName("removeFromPlaylist");
        var removeFromPlaylistArray = Array.prototype.slice.call(removeFromPlaylist);

        const keys = Object.keys(localStorage);


        // Initialize an empty array to store the data
        const dataArray = [];

        // Loop through the keys and retrieve the corresponding data
        keys.forEach(key => {
            dataArray.push(key);
        });

        //to get data from local storage that starts with play1
        const filteredArray1 = dataArray.filter(item => item.startsWith('play1'));
        const filteredArray2 = dataArray.filter(item => item.startsWith('play2'));
        const filteredArray3 = dataArray.filter(item => item.startsWith('play3'));
        const filteredArrayForAll  = dataArray.filter(item => item.startsWith('play'));
        console.log(dataArray);
        console.log(filteredArray1);

        
        firstFavPlay.addEventListener("click", function(){
            console.log("clicked");
            // Used to hide all audio divs
            audioDivArray.forEach(function(e){ 
                e.style.display="none";
            });
            // used to pause all audios that are started earlier
            myAudioArray.forEach(function(e){
                e.pause();
            });
            // Used To remove all the fav icon from audio card refer line 234
            favInCardArray.forEach(function(e){ 
                e.style.display="none";
            });
            // Used to display cancel btn after clicking play, and remove each div card after clicking cancel
            removeFromPlaylistArray.forEach(function(e){
                e.style.display="flex";
                e.addEventListener("click", function(){
                    let remobeBtnVal = e.getAttribute("value");
                    console.log(remobeBtnVal);
                    localStorage.removeItem(`play1${remobeBtnVal}`);
                    location.reload();
                });
            });

            filteredArray1.forEach(function(elem){
                let eachPlay1Audio = localStorage.getItem(`${elem}`);
                let extractedTextofDiv = eachPlay1Audio.substring(0, 9);
                let extractedTextRangeID = eachPlay1Audio.substring(9, 18);
                let extractedTextaudioID = eachPlay1Audio.substring(18, 26);
                let extractedTextofRange = eachPlay1Audio.substring(26, );
                console.log(extractedTextofRange);
                document.getElementById(extractedTextofDiv).style.display="flex";
                document.getElementById(extractedTextRangeID).value=extractedTextofRange;
                
                let play1AudioID = document.getElementById(extractedTextaudioID);
                play1AudioID.volume = extractedTextofRange;
                play1AudioID.play();

                extractedTextaudioID.volume = extractedTextofRange;
            });
        });

        secondFavPlay.addEventListener("click", function(){
            console.log("clicked");
            // Used to hide all audio divs
            audioDivArray.forEach(function(e){ 
                e.style.display="none";
            });
            // used to pause all audios that are started earlier
            myAudioArray.forEach(function(e){
                e.pause();
            });
            // Used To remove all the fav icon from audio card refer line 234
            favInCardArray.forEach(function(e){ 
                e.style.display="none";
            });
            // Used to display cancel btn after clicking play, and remove each div card after clicking cancel
            removeFromPlaylistArray.forEach(function(e){
                e.style.display="flex";
                e.addEventListener("click", function(){
                    let remobeBtnVal = e.getAttribute("value");
                    console.log(remobeBtnVal);
                    localStorage.removeItem(`play2${remobeBtnVal}`);
                    location.reload();
                });
            });

            filteredArray2.forEach(function(elem){
                let eachPlay1Audio = localStorage.getItem(`${elem}`);
                let extractedTextofDiv = eachPlay1Audio.substring(0, 9);
                let extractedTextRangeID = eachPlay1Audio.substring(9, 18);
                let extractedTextaudioID = eachPlay1Audio.substring(18, 26);
                let extractedTextofRange = eachPlay1Audio.substring(26, );
                console.log(extractedTextaudioID);
                document.getElementById(extractedTextofDiv).style.display="flex";
                document.getElementById(extractedTextRangeID).value=extractedTextofRange;
                
                let play1AudioID = document.getElementById(extractedTextaudioID);
                play1AudioID.volume = extractedTextofRange;
                play1AudioID.play();

                extractedTextaudioID.volume = extractedTextofRange;
            });
        });

        thirdFavPlay.addEventListener("click", function(){
            console.log("clicked");
            // Used to hide all audio divs
            audioDivArray.forEach(function(e){ 
                e.style.display="none";
            });
            // used to pause all audios that are started earlier
            myAudioArray.forEach(function(e){
                e.pause();
            });
            // Used To remove all the fav icon from audio card refer line 234
            favInCardArray.forEach(function(e){ 
                e.style.display="none";
            });
            // Used to display cancel btn after clicking play, and remove each div card after clicking cancel
            removeFromPlaylistArray.forEach(function(e){
                e.style.display="flex";
                e.addEventListener("click", function(){
                    let remobeBtnVal = e.getAttribute("value");
                    console.log(remobeBtnVal);
                    localStorage.removeItem(`play3${remobeBtnVal}`);
                    location.reload();
                });
            });
            filteredArray3.forEach(function(elem){
                let eachPlay1Audio = localStorage.getItem(`${elem}`);
                let extractedTextofDiv = eachPlay1Audio.substring(0, 9);
                let extractedTextRangeID = eachPlay1Audio.substring(9, 18);
                let extractedTextaudioID = eachPlay1Audio.substring(18, 26);
                let extractedTextofRange = eachPlay1Audio.substring(26, );
                console.log(extractedTextaudioID);
                document.getElementById(extractedTextofDiv).style.display="flex";
                document.getElementById(extractedTextRangeID).value=extractedTextofRange;
                
                let play1AudioID = document.getElementById(extractedTextaudioID);
                play1AudioID.volume = extractedTextofRange;
                play1AudioID.play();

                extractedTextaudioID.volume = extractedTextofRange;
            });
        });



        
    </script>
    
 
    <script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>

    <script src="../js/allcommon.js"></script>
</body>

</html>